\ProvidesPackage{vimacros}

\usepackage{amsmath, amssymb, xifthen, xstring}

\DeclareMathOperator{\KullbackLeibler}{KL}

% Expectation (optional arg: distribution)
\newcommand{\E}[2][]{\ifthenelse{\equal{#1}{}}{\mathbb{E}\left[#2\right]}{\mathbb{E}_{#1}\left[#2\right]}}

% Entropy
\newcommand{\Ent}[1]{\mathbb{H}\left(#1\right)}

% KL divergence
\newcommand{\KL}[2]{\KullbackLeibler\left(#1\mid\mid #2\right)}

% Normal distribution
\newcommand{\NDist}[2]{\mathcal{N}\left(#1,#2\right)}

% Norm
\newcommand{\norm}[1]{\lvert \lvert #1 \rvert \rvert}

% Logarithm (optional arg: base)
\newcommand{\loga}[2][]{\ifthenelse{\equal{#1}{}}{\log\left(#2\right)}{\log_{#1}\left(#2\right)}}

% Integral (args: integrand, integration variable -- optional: domain of integration)
\newcommand{\intl}[3][]{\ifthenelse{\equal{#1}{}}{\int 
#2 \mathrm{d#3}}{\int_{#1} #2 \mathrm{d}#3}}

% ELBO
\DeclareMathOperator{\ELBO}{ELBO}

% Identity matrix
\DeclareMathOperator{\IMatrix}{I}

% Exponential family
% args: RV, canoncial parameters
% optional: mode -> 
% base = full exponential family (default)
% exp = only the exponential
% log = only the term inside the exponential
% dot = only the inner product between sufficient statistics and natural parameters
\newcommand{\expfam}[3][base]{\IfEqCase{#1}{
{base}{h(#2) \exp\left(\eta(#3)^{\top}t(#2) - a(\eta(#3)\right)}
{exp}{\exp\left(\eta(#3)^{\top}t(#2) - a(\eta(#3))\right)}
{log}{\eta(#3)^{\top}t(#2) - a(\eta(#3))}
{dot}{\eta(#3)^{\top}t(#2)}}}
